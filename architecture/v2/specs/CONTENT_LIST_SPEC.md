# コンテンツ一覧・記事一覧画面 (ContentList / ArticleList) 仕様書

## 概要

リポジトリ内のコンテンツ管理を行うための画面群です。 **コンテンツ一覧
(`ContentList`)**
で管理対象のコレクション（またはシングルトン）を選択し、**記事一覧
(`ArticleList`)** で具体的なファイルを選択、作成、または削除します。

## 1. コンテンツ一覧画面 (ContentList)

`staticms.yml` (v2 では Config API)
で定義されたコンテンツ設定の一覧を表示します。

### UI 構成

- **ヘッダー**:
  - パンくずリスト: `Owner/Repo` (現在地)
  - アクション: `+ Add New Content` ボタン -> 設定追加画面
    (`ContentConfigEditor`) へ遷移。
- **リスト表示 (`ContentList`)**:
  - 各行にコンテンツ設定を表示。
  - **アイコン**: フォルダ (`collection`系) または ファイル (`singleton`系)。
  - **メインテキスト**: ラベル (`name` または `filePath`)。
  - **サブテキスト**: 内部識別子 (`name`)。
  - **ラベル**: ブランチ名 (`main` 等) が指定されていれば表示。
  - **ステータスアイコン**:
    ローカルドラフトがある場合、その旨を表示（緑色のドットなど）。
  - **アクションボタン**:
    - `Edit Config` (鉛筆アイコン): 設定編集画面へ遷移。
  - **クリック時の挙動**:
    - コレクションの場合 -> 記事一覧画面 (`ArticleList`) へ遷移。
    - シングルトンの場合 -> 記事エディタ画面 (`ContentEditor`) へ遷移。

### データフロー

- **Load**: `/api/repo/:owner/:repo/config` から設定を取得。
- **Status Check**: `localStorage`
  をスキャンし、各コンテンツに対応するドラフトが存在するか確認
  (`getContentStatus`)。

## 2. 記事一覧画面 (ArticleList)

選択されたコレクション（ディレクトリ）内のファイル一覧を表示します。

### UI 構成

- **ヘッダー**:
  - パンくずリスト: `Owner/Repo > CollectionName`
  - **新規作成フォーム** (右側):
    - テキスト入力: `New article name...`
    - `Create` ボタン:
      入力値をファイル名として、新規記事作成モードでエディタへ遷移。
- **リスト表示 (`ArticleList`)**:
  - コレクションの対象ディレクトリ内のファイルを一覧表示。
  - **アイコン**: ファイル (`file outline`) または フォルダ (`folder`)。
  - **メインテキスト**: ファイル名（拡張子 `.md` は省略される場合あり）。
  - **ステータス**: ドラフト有無、PR有無を表示（`ContentList`同様）。
  - **アクションボタン**:
    - `Delete` (ゴミ箱アイコン): **[v1未実装/課題]** 記事の削除機能。
  - **クリック時の挙動**: 内容の編集画面 (`ContentEditor`) へ遷移。

### v1 からの課題と新規仕様案

- **削除機能**: v1 ではボタンのみで機能未実装 (`alert` のみ)。v2 では API
  (`DELETE /api/repo/...`) と連携して実装する必要がある。
- **ページネーション/フィルタ**: ファイル数が多い場合の対応（v1は全件表示）。
- **新規作成のUX**:
  現在はシンプルな入力欄だが、Archetype（テンプレート）選択や、ファイル名自動生成（日付プレフィクス等）の機能強化が望ましい。

---

**実装状況メモ (v2)**:

- [x] `ContentList` コンポーネント (共通)
- [x] `ArticleList` コンポーネント (共通)
- [x] `ContentListItem` (共通パーツ) status 表示ロジック含む
- [ ] **Delete 機能の実装**
- [ ] 新規作成時のファイル名正規化ロジックの強化
