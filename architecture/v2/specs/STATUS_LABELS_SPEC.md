# コンテンツステータスラベル (Content Status Labels) 仕様書

## 概要

本仕様書は、Staticms
におけるコンテンツ（記事）の状態を示す一貫したステータスラベル、バッジ、およびアイコンの定義です。
これらの視覚的インジケータにより、操作ユーザーは各コンテンツが現在どのようなライフサイクルにあるか（ドラフト、PR中、公開済みなど）を即座に認識できます。

## ステータス定義一覧

### 1. ローカルドラフト (Draft)

操作ユーザーがブラウザ上で編集中の状態で、まだサーバー（GitHub）に保存されていない変更が存在することを示します。

- **Label**: `Draft`, `Draft (N)`
- **Color**: **Orange**
- **Icon**: `pencil alternate` (Semantic UI)
- **Description**:
  - `localStorage` に保存された未送信の変更がある状態。
  - リポジトリやCollectionに付与する場合、内包するドラフト数を集計し、複数ある場合は
    `Draft (3)` のように件数を接尾表示します。
  - 最も優先順位が高く、ユーザーに「保存忘れ」を気付かせるために目立たせる必要があります。

### 2. レビュー中 (In Review)

PR が作成され、オープン（レビュー待ち）の状態です。

- **Label**: `In Review (#123)`, `In Review (N)`
- **Color**: **Teal**
- **Icon**: `eye`
- **Description**:
  - 関連する Open な PR が存在する状態。
  - 原則として「ロック中」であることを示唆します。
  - PR 番号（例: `#123`）を併記します。
  - リポジトリやCollectionに付与する場合、内包するPR数を集計し、複数ある場合は
    `In Review (3)` のように件数を接尾表示します。

### 3. 承認済み (Approved)

PRがメインブランチにマージされた直後の状態です。

- **Label**: `Approved`
- **Color**: **Purple**
- **Icon**: `check circle`
- **Description**:
  - PR がクローズされ、マージされた直後の状態。
  - **表示条件**: コンテンツ一覧やエディタを閲覧中に、リアルタイム更新 (SSE)
    によって `merged`
    イベントを受信し、かつ**ローカルの未保存変更（Draft）がない**場合のみ一時的に表示します。
  - **挙動**:
    ページのリロード、画面遷移、または**編集開始（Draft発生）**を行うと非表示になります。

### 4. 却下済み (Declined)

PRがマージされずにクローズされた状態です。変更が拒否されたか、不要になったことを示します。

- **Label**: `Declined`
- **Color**: **Red**
- **Icon**: `times circle`
- **Description**:
  - PR がマージされずにクローズされた直後の状態。
  - **表示条件**: コンテンツ一覧やエディタを閲覧中に、リアルタイム更新 (SSE)
    によって `closed`
    イベントを受信し、かつ**ローカルの未保存変更（Draft）がない**場合のみ一時的に表示します。
  - **挙動**:
    ページのリロード、画面遷移、または**編集開始（Draft発生）**を行うと非表示になります。

### 5. 変更なし (Clean)

最新のメインブランチと同期しており、未保存の変更も PR も存在しない状態です。

- **Label**: 表示なし
- **Color**: -
- **Icon**: -
- **Description**:
  - デフォルトの状態です。特別な強調は行いません。

## UI 表現ガイドライン

### A. リスト表示時 (`ContentList` / `ArticleList`)

スペースが限られているため、コンパクトな「バッジ」または「アイコン」を使用します。

- **Draft**:
  - コンテンツ名の右側、またはステータスカラムに `Orange Label (Mini)` で表示。
  - Collection 行の場合、ドラフト数を集計し `Draft (3)` のように表示する。
- **PR Open**: ステータスカラムに `Green Label (Mini)` で `PR #123`
  と表示。クリックで PR へのリンク。

### B. エディタ画面ヘッダー (`ContentEditor`)

操作中のコンテキストを強調するため、より大きなラベルやメッセージバーを使用します。

- **Draft Restored**:
  - ヘッダー右側に `Orange Label` で `Draft Restored` を表示。
  - 「ローカルのバックアップから復元されました」というツールチップまたはトーストを表示。
- **Locked by PR**:
  - ヘッダーに `Warning Message` または `Lock Icon` を表示。
  - "Locked by PR #123" というリンク付きテキストを配置。

## 優先順位 (Priority)

一つのコンテンツが複数の状態を持つ場合（例：PRが出ているが、さらにローカルで編集してドラフトがある）、全ての状態を以下の優先順位で並べます。

1. **Draft** (最優先: ユーザーの未保存作業があるため)
2. **In Review** / **Approved** / **Declined**
