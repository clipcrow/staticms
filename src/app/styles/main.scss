@use "sass:color";

// -----------------------------------------------------------------------------
// GitHub Primer Style Variables
// -----------------------------------------------------------------------------
:root {
  --color-canvas-default: #ffffff;
  --color-canvas-subtle: #f6f8fa;
  --color-border-default: #d0d7de;
  --color-border-muted: #d8dee4;
  --color-neutral-muted: rgba(175, 184, 193, 0.2);

  --color-fg-default: #24292f;
  --color-fg-muted: #57606a;
  --color-fg-subtle: #6e7781;

  --color-accent-fg: #0969da;
  --color-accent-emphasis: #0969da;
  --color-success-fg: #1a7f37;
  --color-danger-fg: #cf222e;

  --header-bg: #f6f8fa;
  --header-text: #24292f;
  --header-logo: #24292f;

  --border-radius: 6px;
  --font-stack-system:
    -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica,
    Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
}

// -----------------------------------------------------------------------------
// Base Reset & Typography
// -----------------------------------------------------------------------------
body {
  font-family: var(--font-stack-system) !important;
  background-color: var(--color-canvas-default);
  color: var(--color-fg-default);
  -webkit-font-smoothing: antialiased;
}

// Override Semantic UI defaults
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-stack-system) !important;
  color: var(--color-fg-default) !important;
}

a {
  color: var(--color-accent-fg);
  text-decoration: none;
  &:hover {
    text-decoration: underline;
  }
}

// -----------------------------------------------------------------------------
// Component Overrides (GitHub Style)
// -----------------------------------------------------------------------------

// Buttons
.ui.button {
  font-family: var(--font-stack-system) !important;
  font-weight: 500 !important;
  border-radius: var(--border-radius) !important;
  transition: 0.2s cubic-bezier(0.3, 0, 0.5, 1) !important;
  transition-property: color, background-color, border-color !important;

  // Default Button (Standard)
  & {
    background-color: #f6f8fa !important;
    color: var(--color-fg-default) !important;
    border: 1px solid rgba(27, 31, 36, 0.15) !important;
    box-shadow: 0 1px 0 rgba(27, 31, 36, 0.04) !important;

    &:hover {
      background-color: #f3f4f6 !important;
      border-color: rgba(27, 31, 36, 0.15) !important;
    }

    &.active, &:active {
      background-color: #ebecf0 !important; // Darker for active state
      border-color: rgba(27, 31, 36, 0.15) !important;
      box-shadow: inset 0 1px 0 rgba(27, 31, 36, 0.04) !important;
    }
  }

  // Basic Button (Transparent / Ghost)
  // FIX: Restore transparency so icons are visible, only show background on hover
  &.basic, &.basic:not(:hover) {
    background-color: transparent !important;
    background: transparent !important;
    color: var(--color-fg-default) !important;
    border: 1px solid transparent
      !important; // Only show border if needed or on hover
    box-shadow: none !important;

    &:hover {
      background-color: var(--color-canvas-subtle) !important;
      border: 1px solid var(--color-border-default)
        !important; // Show border on hover
    }

    // If it's an icon button, ensure icon color is correct
    i.icon {
      color: inherit !important;
    }

    // Colored Basic Buttons
    &.red, &.negative {
      color: var(--color-danger-fg) !important;
      &:hover {
        background-color: rgba(207, 34, 46, 0.1) !important;
        border-color: var(--color-danger-fg) !important;
      }
    }

    &.blue, &.primary {
      color: var(--color-accent-fg) !important;
      &:hover {
        background-color: rgba(9, 105, 218, 0.1) !important;
        border-color: var(--color-accent-fg) !important;
      }
    }
  }

  // Primary Button
  &.primary {
    color: #ffffff !important;
    background-color: #1f883d !important; // GitHub Green (Primary Action)
    border-color: rgba(27, 31, 36, 0.15) !important;
    box-shadow: 0 1px 0 rgba(27, 31, 36, 0.1) !important;

    &:hover {
      background-color: #1a7f37 !important;
    }
  }

  // Blue Button (Accent)
  &.blue {
    background-color: var(--color-accent-emphasis) !important;
    &:hover {
      background-color: color.adjust(#0969da, $lightness: -5%) !important;
    }
  }

  // Red/Negative Button
  &.negative, &.red {
    background-color: #cf222e !important;
    color: #fff !important;
    &:hover {
      background-color: #a40e26 !important;
    }
  }
}

// Forced Black Button for specialized actions (Best Practice approach)
.ui.button.action-black {
  background-color: #000000 !important;
  color: #ffffff !important;
  background-image: none !important;

  &:hover {
    background-color: #333333 !important;
  }
}

// Fix for grouped buttons (Semantic UI style) conflicting with global overrides
.ui.buttons {
  .button {
    border-radius: 0 !important;
    margin-right: -1px
      !important; // Overlap borders to prevent double thickness

    &:first-child {
      border-top-left-radius: var(--border-radius) !important;
      border-bottom-left-radius: var(--border-radius) !important;
    }

    &:last-child {
      border-top-right-radius: var(--border-radius) !important;
      border-bottom-right-radius: var(--border-radius) !important;
      margin-right: 0 !important;
    }

    // Ensure active/focus button is on top
    &:hover, &.active, &:focus {
      z-index: 10 !important;
    }
  }
}

// Inputs
.ui.input input,
.ui.form input:not([type]),
.ui.form input[type="text"],
.ui.form input[type="email"],
.ui.form input[type="password"] {
  font-family: var(--font-stack-system) !important;
  border-radius: var(--border-radius) !important;
  border: 1px solid var(--color-border-default) !important;
  box-shadow: inset 0 1px 2px rgba(27, 31, 36, 0.075) !important;
  background-color: var(--color-canvas-default) !important;

  &:focus {
    border-color: var(--color-accent-fg) !important;
    box-shadow: 0 0 0 3px rgba(9, 105, 218, 0.3)
      !important; // Outline style focus ring
  }
}

// Segments / Cards (The "Box" look)
.ui.segment, .ui.card, .ui.cards > .card {
  box-shadow: none !important;
  border: 1px solid var(--color-border-default) !important;
  border-radius: var(--border-radius) !important;
  background: var(--color-canvas-default);
}

// -----------------------------------------------------------------------------
// Header Styles (Light Mode like GitHub)
// -----------------------------------------------------------------------------
.staticms-header-container {
  background-color: var(--header-bg);
  border-bottom: 1px solid
    var(--color-border-muted); // Use standard border color
  padding: 1rem 1.5rem;
  display: flex;
  flex-wrap: nowrap; // FIX: Prevent stacking
  align-items: center;
  justify-content: space-between;
  gap: 1rem;

  // Ensure header text colors are correct for light theme
  color: var(--header-text);

  @media (max-width: 768px) {
    flex-direction: column;
    align-items: stretch;
  }
}

.staticms-header-start,
.staticms-header-end {
  display: flex !important;
  align-items: center !important;
  gap: 1rem;
}

.staticms-header-title {
  display: flex;
  align-items: center;
  text-decoration: none;
  color: var(--header-text);

  &:hover {
    color: var(--color-accent-fg); // Link blue on hover
    text-decoration: none;
  }

  // Logo Icon
  svg path {
    fill: var(--header-logo);
  }

  .content {
    display: flex;
    flex-direction: column;
    margin-left: 0.75rem;
  }

  .header-text {
    font-size: 1.3rem; // Slightly larger for impact
    font-weight: 900; // Black weight
    line-height: 1;
    color: var(--header-text);
    letter-spacing: 0.05em; // Wide stance
    font-family: "Kanit", sans-serif; // Cool, wide, bold font
    transform: none; // No fake stretching needed
    font-style: italic; // Dynamic look
  }

  .sub-header-text {
    font-size: 0.75rem;
    color: var(--color-fg-muted); // Use variable instead of white
    margin-top: 0.1rem;
    font-weight: normal;
  }
}

.staticms-header-breadcrumb {
  margin: 0 !important;
  font-size: 0.95rem !important;
  align-self: flex-end;
  margin-bottom: 0.2rem !important;
  color: var(--color-fg-muted) !important; // Use muted text

  .divider {
    color: var(--color-fg-subtle) !important;
  }

  // Navigation Links & Clickable Items
  a.section, .section.clickable {
    color: var(--color-accent-fg) !important; // Make navigable items blue
    font-weight: 400 !important;

    &:hover {
      text-decoration: underline;
      cursor: pointer;
    }
  }

  // Non-clickable sections (like current page or non-link root)
  .section {
    font-weight: 400 !important;
    color: var(--color-fg-muted) !important;
  }

  .active.section {
    color: var(--color-fg-default) !important; // Current page is dark
    font-weight: 400 !important;
    text-decoration: none !important;
  }
}

// -----------------------------------------------------------------------------
// Toolbar Area (Sub-header)
// -----------------------------------------------------------------------------
.staticms-toolbar-container {
  background-color: var(--color-canvas-default); // White background
  border-bottom: none;
  padding: 1rem 0;
  margin-bottom: 0; // Remove margin to blend with content
  width: 100%;

  // Restore negative margins for flush alignment of grid/form elements inside container
  .ui.form {
    margin: 0;
    .fields {
      margin-bottom: 0 !important; // Remove vertical spacing
      // Allow Semantic UI default negative margins for horizontal alignment
    }
  }
}

// Fix for action inputs (merged button and input) - Global Style
.ui.action.input {
  > .button, > .buttons {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    margin: 0 !important;
  }

  > input {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
  }
}

// Ensure content container below toolbar also has no internal padding for flush alignment

// -----------------------------------------------------------------------------
// List & Table Styles
// -----------------------------------------------------------------------------
.staticms-content-list-item {
  padding: 0.75em 1em !important; // More padding for clickability
  display: flex !important;
  align-items: center !important;
  border-bottom: 1px solid var(--color-border-muted) !important;

  &:last-child {
    border-bottom: none !important;
  }

  &:hover {
    background-color: var(--color-canvas-subtle) !important;
  }
}

.staticms-content-list-clickable {
  display: flex;
  align-items: center;
  color: var(--color-fg-default) !important;
  width: 100%;

  &:hover {
    color: var(--color-accent-fg) !important;
    text-decoration: none !important;
  }
}

// -----------------------------------------------------------------------------
// GitHub Box Style (Card Header)
// -----------------------------------------------------------------------------
.ui.card {
  overflow: hidden; // Ensure radius clips content

  .content.header-segment {
    background-color: var(--color-canvas-subtle) !important;
    border-bottom: 1px solid var(--color-border-default) !important;
    padding: 0.75rem 1rem !important;
    flex-grow: 0 !important; // Prevent header from expanding

    .header {
      font-size: 0.95em !important;
      font-weight: 600 !important;
      margin: 0 !important;
      color: var(--color-fg-default) !important;
      line-height: 1.4 !important;
    }

    // Icon styling
    i.icon {
      color: var(--color-fg-muted);
      opacity: 0.8;
    }
  }

  // Body Content
  .content {
    padding: 1rem !important;
  }

  // Footer (Extra content)
  .extra.content {
    background-color: transparent !important;
    border-top: 1px solid var(--color-border-muted) !important;
    color: var(--color-fg-muted) !important;
    padding: 0.75rem 1rem !important;

    i.icon {
      color: var(--color-fg-muted);
    }
  }
}

// Status Badges (Pill shape)
.ui.label {
  border-radius: 2em !important; // Pill shape
  font-weight: 500 !important;
  border: 1px solid transparent !important;

  &.basic {
    border: 1px solid var(--color-border-default) !important;
    background: #ffffff !important;
  }
}

// -----------------------------------------------------------------------------
// Toast & Utility
// -----------------------------------------------------------------------------
.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-width: 300px;
  max-width: 400px;
}

.toast-message {
  box-shadow: 0 8px 24px rgba(140, 149, 159, 0.2); // Softer shadow
  border: 1px solid var(--color-border-muted) !important;
  border-radius: var(--border-radius) !important;
  animation: slideIn 0.3s cubic-bezier(0.21, 1.02, 0.73, 1);
  position: relative;

  &.ui.message {
    margin: 0;
  }
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

// -----------------------------------------------------------------------------
// Markdown Editor Overrides (Restored from v1)
// -----------------------------------------------------------------------------
.w-md-editor-toolbar li > button {
  width: 32px !important;
  height: 32px !important;
  font-size: 16px !important; // Keep font size for text based buttons if any
}

.w-md-editor-toolbar li > button svg {
  width: 18px !important;
  height: 18px !important;
}

// -----------------------------------------------------------------------------
// Editor Layout
// -----------------------------------------------------------------------------
.staticms-editor-container {
  margin-top: 2rem !important;
  padding-bottom: 80px !important;
}

.staticms-editor-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: var(--color-canvas-default, #fff);
  border-top: 1px solid var(--color-border-muted, #d0d7de);
  padding: 1rem 2rem;
  z-index: 100;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);

  .actions-left {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .commit-message-wrapper {
    width: 400px;
  }
}

.staticms-markdown-editor-wrapper {
  margin-top: 1rem;
}

// -----------------------------------------------------------------------------
// Header Specifics
// -----------------------------------------------------------------------------
.staticms-header-logo-img {
  height: 32px;
  vertical-align: middle;
}

.staticms-header-breadcrumb-container {
  display: flex;
  align-items: center;
}

.staticms-header-breadcrumb-title {
  font-weight: 900;
  font-size: 1.5rem;
  margin-left: 0.8rem;
  color: #1f2328;
  line-height: 1.25;
}

.staticms-clickable-text {
  cursor: pointer;
}

// -----------------------------------------------------------------------------
// YamlListEditor
// -----------------------------------------------------------------------------
.staticms-yaml-list-editor {
  .add-button-top {
    margin-bottom: 1rem;
    text-align: center;
  }

  .list-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .list-item {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
    align-items: stretch;
    // opacity and cursor are handled dynamically
  }

  .item-content {
    flex: 1;
    cursor: default;
  }

  .item-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 40px;
    flex-shrink: 0;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .item-index {
    font-weight: bold;
    color: #999;
    font-size: 1em;
  }

  .delete-button {
    margin-top: auto;
    margin-bottom: auto;
    box-shadow: none !important;
  }

  .add-button-bottom {
    margin-top: 1rem;
    text-align: center;
  }
}

// -----------------------------------------------------------------------------
// ArticleListView
// -----------------------------------------------------------------------------
.staticms-article-list-container {
  margin-top: 2rem !important;
}

.staticms-search-create-bar {
  margin-top: 1rem !important;
  margin-bottom: 1rem !important;

  .inner-wrapper {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
  }

  .search-box {
    flex: 1;
    min-width: 200px;
  }

  .create-box {
    flex: 1;
    min-width: 300px;
  }
}

.staticms-article-card-header {
  word-break: break-all;
}

.staticms-pagination-wrapper {
  margin-top: 1em;
  text-align: center;

  .current-page-info {
    color: black !important;
    opacity: 1 !important;
  }
}

// -----------------------------------------------------------------------------
// ConfigHelpers
// -----------------------------------------------------------------------------
.staticms-config-field-row {
  vertical-align: middle !important;
}

.staticms-config-name-cell {
  width: 35%;
  min-width: 150px;

  input {
    height: 32px !important;
  }
}

.staticms-config-default-cell {
  input {
    height: 32px !important;
  }
}

.staticms-config-action-cell {
  width: 1%;
  white-space: nowrap;

  .delete-field-btn {
    margin: 0 !important;
    box-shadow: none !important;
  }
}

.staticms-add-field-btn {
  margin-top: 10px !important;
}

// -----------------------------------------------------------------------------
// ConfigForm
// -----------------------------------------------------------------------------
.staticms-config-form-container {
  margin-top: 2rem !important;
  padding-bottom: 100px !important;
}

.staticms-config-section {
  margin-bottom: 2rem;
}

.staticms-config-form-inner {
  margin-top: 1rem;
}

.staticms-helper-text-block {
  display: block;
  margin-top: -10px;
  margin-bottom: 20px;
}

.staticms-archetype-header {
  font-size: 0.93rem !important;
  font-weight: 700 !important;
}

.staticms-archetype-editor-wrapper {
  margin-top: 1rem;
}

.staticms-archetype-helper {
  display: block;
  margin-top: 0.5rem;
}

.staticms-config-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: var(--color-canvas-default, #fff);
  border-top: 1px solid var(--color-border-muted, #d0d7de);
  padding: 1rem 2rem;
  z-index: 100;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05);

  .actions-left {
    display: flex;
    gap: 1rem;
  }
}

// -----------------------------------------------------------------------------
// RepositoryList
// -----------------------------------------------------------------------------
.staticms-repo-list-container {
  margin-top: 1rem !important;
  margin-bottom: 1rem !important;
}

.staticms-repo-toolbar {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;

  .search-wrapper {
    flex: 1;
    min-width: 200px;
  }

  .filter-wrapper {
    flex-shrink: 0;
  }

  .connect-wrapper {
    flex-shrink: 0;
  }
}

.staticms-repo-grid-container {
  margin-top: 2rem !important;
}

.staticms-repo-card-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5em;

  .repo-title-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5em;

    i.icon {
      opacity: 0.5;
      margin: 0;
      line-height: 1;
      height: auto;
    }

    .repo-name {
      word-break: break-all;
      font-weight: bold;
      font-size: 1.1em;
      line-height: 1;
      color: rgba(0, 0, 0, 0.85);
    }
  }

  .repo-star-wrapper {
    color: #666;
    display: flex;
    align-items: center;
    gap: 0.25em;
    flex-shrink: 0;
    margin-left: 0.5em;

    i.icon {
      margin: 0;
      line-height: 1;
      height: auto;
    }

    span {
      line-height: 1;
    }
  }
}

.staticms-repo-card-desc {
  margin-top: 0.5em;

  .branch-label {
    margin-bottom: 0.5em;
  }
}

.staticms-repo-card-meta {
  margin-top: 1em;
  font-size: 0.9em;
}

.staticms-repo-card-extra-badges {
  display: flex;
  gap: 0.5em;
  flex-wrap: wrap;
}

.staticms-repo-settings-btn {
  margin: 0 !important;
}

// -----------------------------------------------------------------------------
// ContentImages
// -----------------------------------------------------------------------------
.staticms-images-container {
  box-shadow: none !important;
  border: none !important;
}

.staticms-images-header-segment {
  background: transparent !important;
  border-bottom: none !important;
  padding-left: 0 !important;
}

.staticms-images-header-title {
  font-size: 1em !important;
}

.staticms-images-content {
  padding: 0 !important;
}

.staticms-images-list {
  margin: 0 !important;
}

.staticms-images-item {
  cursor: grab;
  padding: 0.75em 1em !important;
  border-bottom: none !important;
}

.staticms-images-item-name {
  font-size: 0.9em !important;
}

.staticms-images-pending-list {
  margin: 0 !important;
  // border-top handled dynamically if needed, or moved to class logic
}

.staticms-images-pending-item {
  cursor: grab;
  padding: 0.75em 1em !important;
  border-bottom: 1px solid var(--color-border-muted) !important;
  background-color: #fff8c5 !important;
}

.staticms-images-empty {
  padding: 2em 1em !important;
  text-align: center !important;
  color: var(--color-fg-muted) !important;
}

.staticms-images-upload-section {
  border-top: none !important;
  padding-top: 1rem !important;
}

.staticms-images-dropzone {
  min-height: 80px;
  margin: 0 !important;
  box-shadow: none !important;
  border: 1px dashed var(--color-border-default) !important;
}

.staticms-images-dropzone-header {
  font-size: 0.85rem !important;
  margin: 0 !important;

  i.icon {
    font-size: 1.2rem !important;
    margin-bottom: 0.5rem !important;
  }
}

.staticms-images-dropzone-input-wrapper {
  margin-top: 0.5rem !important;
}

.staticms-images-preview-modal {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;

  .ui.modal {
    top: auto !important;
    left: auto !important;
    position: relative !important;
    width: auto !important;
    max-width: 60vw !important;
    max-height: 90vh !important;
    margin: auto !important;
  }

  .image.content {
    justify-content: center !important;
    overflow: hidden !important;

    img {
      max-height: 60vh !important;
      object-fit: contain !important;
    }
  }
}

// -----------------------------------------------------------------------------
// MarkdownEditor
// -----------------------------------------------------------------------------
.staticms-markdown-image-preview {
  max-width: 100% !important;
}
